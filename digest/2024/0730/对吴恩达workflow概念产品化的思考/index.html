

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />

	<title>对吴恩达workflow概念产品化的思考！ 作者： Datawhale 来源： Datawhale Datawhale干货 作者：鲁力，Datawhale成员 本文摘要 本文针对当前 workflow 类型产品所存在的问题，思考了产品设计的方法论，主要内容包括：将任务进行形式化表达，提出 workflow 的系统设计可以形式化地表达为 DFA 的构造，以及流程节点设计是给  | AiBard123| ai工具网址导航,ai最新产品</title>
	<link rel="shortcut icon" href="/assets/images/favicon.png" />
    <meta name="keywords" content="chatgpt,AI,AI聊天,AI文本生成,AI绘画,AI编程,AI电商" />
    <meta name="description" content="AiBard123 网址导航 | 免费chatgpt 汇集各类先进的人工智能产品，旨在帮助用户更快速地了解和使用这些产品,轻松地浏览不同领域的AI产品，包括语音识别、图像处理、自然语言处理。" />
    
    <meta name="baidu-site-verification" content="codeva-cCAOSG8MBO" />
    
    <link rel="stylesheet" id="block-library-css"
        href="/assets/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/assets/css/iconfont-3.03029.1.css"
        type="text/css" media="all" />

    
    <link href="/scss/style.min.css" rel="stylesheet" />
    
		    <link rel="stylesheet" id="iowen-css" href="/assets/css/style-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/assets/css/custom-style.css"
        type="text/css" media="all" />
		
		<link rel="stylesheet" href=/plugins/font-awesome/css/font-awesome.min.css />


    <link rel="stylesheet" id="fortawesome-css" href="/assets/fontawesome-5.15.4/css/all.min.css" type="text/css" />


    <script type="text/javascript" src="/assets/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/assets/js/content-search.js"  id="content-search-js"></script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2073588164294660"
     crossorigin="anonymous"></script>

	
    <script>
        

		var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8450bc732b2a86f7e4aec4ebd9fd8252";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

        
    </script>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7071W80M2K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-7071W80M2K');
    </script>

</head>


    <div class="page-container">
	
	<div id="sidebar" class="sticky sidebar-nav fade animate-nav" style="width: 170px">
        
            <div class="modal-dialog h-100 sidebar-nav-inner">
                <div class="sidebar-logo border-bottom border-color">
                    
                    <div class="logo overflow-hidden">
                        <a href="https://aibard123.com/" class="logo-expanded">
                            <img src="/assets/images/bt8-expand-light.png" height="40" class="logo-light"
                                alt="AiBard123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt8-expand-dark.png" height="40" class="logo-dark d-none"
                                alt="AiBard123| ai工具网址导航,ai最新产品">
                        </a>
                        <a href="https://aibard123.com/" class="logo-collapsed">
                            <img src="/assets/images/bt.png" height="40" class="logo-light"
                                alt="AiBard123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt.png" height="40" class="logo-dark d-none"
                                alt="AiBard123| ai工具网址导航,ai最新产品">
                        </a>
                    </div>
                    
                </div>
                <div class="sidebar-menu flex-fill">
                    <div class="sidebar-scroll">
                        <div class="sidebar-menu-inner">
                            <ul>
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#00834a9dd147b04c5d53d4368cdb0b57" class="smooth">
                                            <i class="fas fa-sun fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>本月热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db0311e7ecfedd24d157f0ceb4a0897f" class="smooth">
                                            <i class="fas fa-star-and-crescent fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>热门网站</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#21b5cbb2c769010fec3ce029a5f8a4a3" class="smooth">
                                            <i class="far fa-star fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>国内热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#8310718935e8ec25ce0350de01e3f7dc" class="smooth">
                                            <i class="fas fa-phone fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>对话工具</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#d58e850d9115797306c2edf61ac6ddd8" class="smooth">
                                            <i class="fas fa-newspaper fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>写作</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2a7418a5f8f1ca4e054364a9300657df" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#7808a68ee1b34dab43011429a12de19e" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像处理</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#6729afc51f5ac49a828812fa0eb0c82f" class="smooth">
                                            <i class="fas fa-video fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音视频</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#e5ce844860451fff3faf3d8f8894971d" class="smooth">
                                            <i class="fas fa-music fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音乐生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db53804b7d726967c58fcc8c9ca03d27" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>办公</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#47b7af9547e034d28fe6f6d439968ac8" class="smooth">
                                            <i class="fas fa-copy fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>提示词</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#41282bf95e43c64d579757573a03cdde" class="smooth">
                                            <i class="fas fa-code fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>编程</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#fd71852fd52d5e18ef4f9a252f1eac58" class="smooth">
                                            <i class="fas fa-search fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>AI搜索</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#81b1637fbe47625dbdf2094acd3b6683" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>文本翻译</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2e9ba3fa6e1ed0e9311b3e97f97f9a40" class="smooth">
                                            <i class="fas fa-book fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>学习网站</span>
                                        </a>
                                    </li>
                                    
                                
                            </ul>           
                        </div>
                    </div>
                </div>
                <div class="border-top py-2 border-color">
                    <div class="flex-bottom">
                        <ul>
			    <li id="menu-item-212"
                                 class="menu-item menu-item-type-custom menu-item-object-custom menu-item-212 sidebar-item">
                                 <a href="#friendlink" class="smooth">
                                     <i class="fab fa-staylinked icon-fw icon-lg mr-2"></i>
                                     <span>友情链接</span>
                                 </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


<div class="flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="AiBard123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-light"
                            alt="AiBard123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-dark d-none"
                            alt="AiBard123| ai工具网址导航,ai最新产品">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        
			<li >
				<a href="/">
                                    <i class="fa fa-home fa-lg mr-2"></i>
                                    <span>首页</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			</ul>

                        
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "008000",
                                        "tmpSize": 14,
                                        "cityColor": "008000",
                                        "citySize": 14,
                                        "aqiColor": "#008000",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "085791e805a24491b43b06cf58ab31e7"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        
                        <li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li>
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>




<body class="page-body boxed-container  io-grey-mode">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        
        <div class="content">
            <style>
    body{
	    background: #f9f9f9;
	}

    h1, h2, h3, h4, h5, h6 {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }


 
@media (min-width: 1000px) {
  .container, .container-sm {
    max-width: 800px;
  }
}

</style>

<div class="featured-post-content">

    <a href="/digest/" class="featured-post-title">
       AI 文摘
    </a>

</div>

<section class="blog-single">
  <div class="container">
    <div class="row">

      <div class="col-lg-12 order-1 order-lg-2">
        <article class="single-blog">
          <p class="title">对吴恩达workflow概念产品化的思考！</p>
            <br/>
          <ul class="meta">
            <li>
              By <a href=https://aibard123.com/about>AiBard123</a>
            </li>
            <li>
              <i class="fa fa-clock-o"></i>
              July 30, 2024 - 2 min read
            </li>
          </ul>

          <div class="_1NCGf">
              <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/iaG2fMDnhiaW7vkZcqgp8QpLIS6Q0IMsPibRcafws4Y0VwyF8qAH6DtBZhZttZALVygy60CAoTxagGdPxxVnUezmA/640?wx_fmt=png&amp;from=appmsg" width="640" >
          </div>
            <br>
            <br>
            <br>
          
          <div class="single-blog-content">
            <p>作者： Datawhale  来源： <a href="https://mp.weixin.qq.com/s/lk0h9ZtiR0BKlIoW2Kk8zw">Datawhale</a></p>
<p>Datawhale干货</p>
<p><strong>作者：鲁力，Datawhale成员</strong></p>
<p><strong>本文摘要</strong></p>
<h4 id="heading"></h4>
<p>本文针对当前 workflow 类型产品所存在的问题，思考了产品设计的方法论，主要内容包括：将任务进行形式化表达，提出 workflow 的系统设计可以形式化地表达为 DFA 的构造，以及流程节点设计是给定约束条件下的 DFA 状态数量最小化问题。</p>
<p>具体章节如下：</p>
<ol>
<li>引言</li>
</ol>
<p>1.1 背景</p>
<p>1.2 当前 workflow 类型产品存在的问题</p>
<p>1.3 本文主要工作</p>
<ol start="2">
<li>正文</li>
</ol>
<p>2.1 现实世界的任务天然具有状态属性</p>
<p>2.2 工作流编排的本质是驱动状态的有序流转</p>
<p>2.3 workflow 系统是一个确定有限自动机</p>
<p>2.4 流程节点设计是给定约束条件下的最优化问题</p>
<ol start="3">
<li>结论与展望</li>
</ol>
<p>3.1 结论</p>
<p>3.2 展望</p>
<ol start="4">
<li>致谢</li>
</ol>
<p><strong>1 引言</strong></p>
<h4 id="heading-1"></h4>
<p><strong>1.1 背景</strong></p>
<h4 id="heading-2"></h4>
<p>大模型发展到今天，大家基本已经达成了一个共识：复杂的工作任务不可能通过单次 LLM 调用来解决。所以吴恩达、Itamar Friedman、Harrison Chase等人一直在提倡 workflow、flow engineering 之类的概念，意在通过多次、分阶段的 LLM 调用、迭代来实现更好的应用效果。</p>
<p>目前，国内外 coze、百度千帆/灵境/客悦、Dify、FastGPT、flowise、langflow 等诸多平台也推出了自己的 workflow 产品，实现了对执行流程进行可视化的低代码编排，以下我们讨论的 workflow 产品化是指这一类型的产品。</p>
<p><strong>1.2 当前 workflow 类型产品存在的问题</strong></p>
<h4 id="heading-3"></h4>
<p>目前业界对于 workflow 形态产品的设计理念并未有明确的共识，或者说正在互相借鉴。从实际效果看，目前市面上的 workflow 产品存在 2 点问题：</p>
<p><strong>（1）能力存在明显边界：现实中还有很多工作任务不能够在 workflow 中被复现。</strong></p>
<p>我们以保险行业的一个AI客服场景业务流程为例，目前市面上所看到的所有 workflow 类产品，都无法复现下述场景应用：</p>
<pre><code>1. AI 客服询问用户的年龄、性别、学历等多项基本信息。

2. 信息确认环节：AI 客服判断用户回答信息是否完整——如果完整，才可以进入下一步骤；如果回答不完整，则继续追问缺失信息，如果回答始终不完整，那么应该始终进行追问。

3. 多轮对话环节：根据用户信息，基于保险产品资料介绍，向用户推荐合适的保险产品，并回答用户的疑问（本质上是基于 RAG 的多轮对话）。

4. 一旦识别到用户购买意愿，发送对应产品的下单链接等后续步骤……
</code></pre>
<p><strong>（2）受众群体有限：目前 workflow 类产品相比GPTs 类产品而言有更高的技术门槛，受众群体数量小了若干个数量级。</strong></p>
<p>目前的 workflow 产品的发展处于一种“鸡肋”般的尴尬位置——说灵活吧，又不如全代码灵活，研发人员看不上；说易用吧，相比 GPTs 学习门槛明显提高，不懂技术的人学不会。</p>
<p>笔者认为，GPTs 和 workflow 这两大产品类型的背后，是构建 LLM 应用的两种范式——<strong>自然语言</strong> 和<strong>形式逻辑</strong> 。这里我们稍作展开解释。</p>
<p>形式逻辑为我们提供了一个严格的推理框架，但自然语言却超越了这种单纯的逻辑，发展出了微妙的引申含义。</p>
<p>举个例子，以下 A 和 B 两句陈述在形式逻辑上等价，但在语言理解上，B 的话似乎是在反驳和嘲讽。</p>
<ul>
<li>
<p>A ：我相信我所看到的东西</p>
</li>
<li>
<p>B：原来你看不到你不相信的东西</p>
</li>
</ul>
<p>在某些命题上，逻辑和语言的矛盾难以调和。例如，“极限的投影是投影的极限”与“投影的极限是极限的投影”两个命题，在逻辑上等价，而在几何视角下并不等价——集合的极限不存在时，投影的极限可能存在。</p>
<p>这是因为几何定律的语言陈述方式影响了逻辑的理解。动词“是”在语法上区分了主语和谓语，“A 是 B”可解释为首先断言 A 的存在，而 B 的存在以 A 的存在为前提条件。</p>
<p>GPTs 由于采用了自然语言的便利性，降低了门槛，必然会得到更广泛的使用。但是，欲戴皇冠，必承其重，<strong>既然使用了自然语言，所以也必须承受自然语言带来的能力约束</strong> ——用自然语言描述清楚一项复杂工作是非常困难的，没有人能够光用嘴巴教你怎么样造火箭或者量子物理。</p>
<p><strong>要想进一步拓宽上限，就必须采用形式化的表达。</strong></p>
<p>GPTs 和 workflow 没有谁好谁坏，就是两种范式，二者各有所长但没有高低之分，理论上还可以互相调用、取长补短。</p>
<p>尽管目前来看， workflow 仍然具有较高一些的学习门槛，但长期来看，人群定位应该趋同于 GPTs。</p>
<p>我们不应该将workflow 定位于 LLM技术爱好者群体，定位于技术爱好者群体将会让 workflow 产品的发展之路越走越窄，虽然目前还没有办法大幅降低门槛，但如何提高易用性仍然是产品经理需要思考的问题。</p>
<p><strong>1.3 本文主要工作</strong></p>
<h4 id="heading-4"></h4>
<p>本文针对目前 workflow 产品能力存在明显边界的问题（我们认为主要原因是缺少产品设计方法论）进行讨论。为了解决这个问题，笔者认为需要厘清以下 3 点：</p>
<p><strong>（1）明确 workflow 产品的设计目标</strong></p>
<p>理论上，整个 workflow 在系统设计时应该是能够处理通用任务的，也就是说它是一个通用图灵机，可以执行任意一个特定的工作任务——无论是人机多轮对话，还是根据人类修改意见不断迭代信贷尽调报告，抑或是一个 AI 保险销售去向客户推销保险产品，都应该能放在一个通用框架下去实现。</p>
<p><strong>现在市面上有些产品细分出了工作流和聊天流等多个类型，笔者认为没有必要。</strong> 现实世界的真实任务本不存在工作流、聊天流如此泾渭分明的划分，硬生生地强行分类并不合理，也提高了用户学习和使用门槛。</p>
<p><strong>（2）明确“你的”workflow 产品”要解决哪些业务场景下的工作任务。</strong></p>
<p>尽管 workflow 体系在设计时能够处理任意特定任务，是个通用图灵机，但在具体产品落地的时候，workflow 应该包含哪些流程节点，取决于“你的”workflow 产品”要复现哪些现实世界的工作任务（以下简称“任务”）。</p>
<p>以下两种产品设计思路的方向是截然相反的，我们认为应该采取第一种：</p>
<pre><code>1. 现有任务的集合，再决定设计出哪些节点（node）。

2. 先设计出节点（node），再思考我设计出的节点能够完成哪些现实世界的任务。
</code></pre>
<p><strong>（3）对“任务”进行形式化定义</strong></p>
<p>每一个设计 workflow 产品的产品经理，或多或少应该都会遇到这样的思索——现实世界中的任务千变万化、数量繁多，到底应该有哪些流程节点（node）？这些节点应该发挥哪些功能？</p>
<p>歌诗合为事而作，设计流程节点固然要先明确整个产品要解决哪些任务。但是这还不够，我们还需要对任务进行形式化的表达。</p>
<p><strong>当我们能够对任务进行形式化表达的时候，就能够思考对各种任务的中间过程状态的拆解以及合并归类的方法和策略，进而设计出合理的流程节点。</strong></p>
<p>如果没有方法和策略作为指引，产品经理很容易自然而然地从技术实现角度出发，去思考目前能够做出哪些流程节点。</p>
<p>经过思考，我们得出了两点结论，这两点结论指引我们对于 workflow 产品的设计：</p>
<p>1.<strong>workflow 的系统设计可以形式化地表达为 DFA 的构造。</strong></p>
<p>2.<strong>workflow 的流程节点设计是给定约束条件下的 DFA 状态数量最小化问题。</strong></p>
<p><strong>2 正文</strong></p>
<h4 id="heading-5"></h4>
<p><strong>2.1 现实世界的任务天然具有状态属性</strong></p>
<h4 id="heading-6"></h4>
<p>我们先给出一些基本定义，然后结合具体例子来解释这些定义：</p>
<p>1.<strong>现实世界的任何一个任务，都天然具有状态属性。</strong></p>
<p>2.<strong>任何一个任务至少包含 2 个以上的状态：初始状态和结束状态，此外还可以拥有中间若干过程状态。</strong></p>
<p>3.<strong>当任务处于结束状态时，我们认为任务已完成。</strong></p>
<p>假设我们面对一个“把大象放进冰箱”的任务，对于一般人而言，完成这个任务需要经历以下 5 个状态：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/iaG2fMDnhiaW7vkZcqgp8QpLIS6Q0IMsPib4tJ2xhUicwXNFGwaXOYiadeVicdgcTycDDgWGsZrq2IEV2NKo1k3qNj6w/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<ul>
<li>
<p>初始状态：任务初始状态</p>
</li>
<li>
<p>中间状态 1：冰箱门被打开</p>
</li>
<li>
<p>中间状态 2：大象被在冰箱里</p>
</li>
<li>
<p>中间状态 3：冰箱门被关闭</p>
</li>
<li>
<p>结束状态：任务已完成（当然，我们也可以把 中间状态 3 和 结束状态 合并为一个状态）</p>
</li>
</ul>
<p>我们继续以之前的 AI 保险销售任务为例，一般而言，可能会被划分为以下中间状态：</p>
<ul>
<li>
<p>状态 1：AI 已发送开场白</p>
</li>
<li>
<p>状态 2：用户已发送文字</p>
</li>
<li>
<p>状态 3：判断用户输入内容是否包括全部所需要信息（年龄、性别、学历……）</p>
</li>
<li>
<p>状态 4：追问用户缺失信息</p>
</li>
<li>
<p>状态 5：结合保险知识库向用户推荐相关保险产品</p>
</li>
<li>
<p>状态 6：用户已发送文字</p>
</li>
<li>
<p>状态 7：判断用户是否表达购买意愿</p>
</li>
<li>
<p>状态 8：……</p>
</li>
</ul>
<p><strong>2.2 工作流编排的本质是驱动状态的有序流转</strong></p>
<h4 id="heading-7"></h4>
<p>当我们有了对任务状态属性的明确定义以后，可以发现，对于任务的工作流编排，<strong>本质上是通过使用一些工具（流程节点 node），使得任务有序地抵达若干特定中间状态，最终达到结束状态</strong> 。</p>
<p>完成一个任务应该需要经历多少个中间状态，取决于两点：</p>
<ul>
<li>
<p>流程编排者<strong>对于 任务执行过程 的理解</strong></p>
</li>
<li>
<p>系统拥有哪些<strong>工具（流程节点）</strong></p>
</li>
</ul>
<p>也就是说不同的人对于任务的理解，以及他所能使用的工具，决定了他可能会将任务的执行划分为哪几个步骤。</p>
<p>以“把大象放进冰箱”任务为例，当我们手里有【机械臂】和【起重机】 2 种工具时，我们可能会划分出以下三个中间状态：</p>
<ul>
<li>
<p>用【机械臂】打开冰箱门</p>
</li>
<li>
<p>用【起重机】把大象放进冰箱</p>
</li>
<li>
<p>用【机械臂】关上冰箱门</p>
</li>
</ul>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/iaG2fMDnhiaW7vkZcqgp8QpLIS6Q0IMsPibnJpyPknCkUofDruEEoiaicSROBLpK4mNiaeu89Edtenx6xsheGbs5E8LQ/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>而当我们拥有【机械臂】、【起重机】和【威震天】一共 3 种工具时，我们可能只使用威震天这一个工具，直接向威震天发送命令“帮我把大象放进冰箱”，而不需要关心威震天的具体执行细节。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/iaG2fMDnhiaW7vkZcqgp8QpLIS6Q0IMsPibicP2C8ztIHwfoD7libvF0WdZpOrK3GDEf6quklKjVrnfr34iavUcAzaZQ/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>最极端的理想情况下，假设我们有一个【万能助手】工具，可以端到端地完成用户交代所有任务，那么整个系统不需要存在中间状态，只有初始状态和结束状态。</p>
<p><strong>2.3 workflow 系统是一个确定有限自动机</strong></p>
<h4 id="heading-8"></h4>
<p>给定现实世界的若干类型的任务集合（），如果 workflow 系统能够完成这些任务，那么意味着存在若干流程节点的有序序列，使得任务集合  里的所有任务抵达结束状态。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/iaG2fMDnhiaW7vkZcqgp8QpLIS6Q0IMsPibpxlBvNAVeU4qjibpE3uiaAhwxHia829xasdxc3YySiaoawvFkZ2QCgiavibw/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>整个工作流产品可以用五元组来表示：</p>
<p>*<strong>有限状态集合</strong>  ：给定任务集合  （包括初始状态、中间状态、结束状态）所包含状态的有限集合。</p>
<p>*<strong>有限流程节点集合</strong>  ：workflow 产品所提供的流程节点的集合。</p>
<p>*<strong>状态迁移函数</strong> δ ： ，状态迁移函数的值是状态集合  的子集。迁移函数定义了在经过流程节点的处理后，workflow 如何从一个状态迁移到另一个状态。</p>
<p>*<strong>初始状态</strong> ：workflow 的初始状态，</p>
<p>*<strong>结束状态集合</strong>  ：任务的结束状态集合，</p>
<p>在自动机理论中，这样的五元组表达是一个自动机。更进一步，如果我们认为一个流程节点在内部配置不同时，可以被当做不同的流程节点，那么这是一个确定有限自动机（DFA）。</p>
<p><strong>2.4 流程节点设计是给定约束条件下的最优化问题</strong></p>
<h4 id="heading-9"></h4>
<p>workflow 产品的核心设计内容是流程节点的设计以及相关交互，从产品角度，在能够完成任务集合  的前提下，<strong>流程节点设计追求的目标应该是「尽可能简单的流程编排步骤」</strong> ——对于一个需要完成的任务，编排者能够比较快速地使用系统提供的流程节点进行搭建。</p>
<p>极端理想情况下，每类任务都能用一个流程节点（相当于万能 agent）搞定，这样对于用户的学习和使用成本是最低的。</p>
<p>如果我们用形式化的表达方式，这个问题应该等价于：在给定任务集合  的情况下，通过设计流程节点集合  ，使得** DFA 中的状态集合**** 的状态数量**** 最小** 。</p>
<p>很幸运，自动机理论已经给我们提供了标准的区分表算法 (Myhill-Nerode 定理)来进行 DFA 状态数最小化：通过定义状态的不可区分（indistinguishable）概念，来将不可区分的状态合并为一个状态，达到减小状态数量的目的。</p>
<pre><code>算法 区分表最小化 DFA  
输入：DFA (Q, Σ, δ, q0, F)  
输出：最小化的 DFA  
  
1. 初始化区分表 T 为 |Q| x |Q| 的布尔矩阵，所有条目初始为 false  
2. 对于每个状态对 (p, q)：  
    如果 p ∈ F 且 q ∉ F 或 p ∉ F 且 q ∈ F：  
        将 T[p, q] 设为 true  // 标记 (p, q) 为可区分  
  
3. 重复直到没有更多条目被标记：  
    对于每个未标记的状态对 (p, q) 和每个符号 c ∈ Σ：  
        令 δ(p, c) = p' 和 δ(q, c) = q'  
        如果 T[p', q'] 被标记：  
            将 T[p, q] 设为 true  // 标记 (p, q) 为可区分  
  
4. 构建最小化 DFA 的状态集合 Q'：  
    初始化 Q' 为 ∅  
    使用未标记的状态对构建等价类，每个等价类选择一个代表状态  
  
5. 设定最小化 DFA 的初始状态 q0' 为 q0 所在等价类的代表状态  
6. 设定最小化 DFA 的接受状态集合 F' 为所有包含至少一个接受状态的等价类的代表状态  
  
7. 定义最小化 DFA 的状态转移函数 δ'：  
    对于每个等价类的代表状态 r 和每个符号 c ∈ Σ：  
        令 s := δ(r, c)  
        令 r' 为 r 所在等价类的代表状态  
        令 s' 为 s 所在等价类的代表状态  
        设定 δ'(r', c) = s'  
  
8. 返回最小化的 DFA (Q', Σ, δ', q0', F')
</code></pre>
<p>当然实际情况可能会更复杂，不可能完全按照算法策略进行优化，因为给定任务集合并不是可以完全枚举的，但 Myhill-Nerode 定理仍然可以给产品设计带来一些启发。</p>
<p>比如在给定业务场景下，假如我们发现，<strong>知识检索节点处理完成的状态</strong> ，和<strong>LLM 节点处理完成的状态</strong> ，是不可区分的，那么它们可以合并成一个 RAG 节点，通过对基础的组件进一步抽象，达到降低使用门槛的目的。</p>
<p><strong>3 结论与展望</strong></p>
<h4 id="heading-10"></h4>
<p><strong>3.1 结论</strong></p>
<h4 id="heading-11"></h4>
<p>综上所述，本文从目前市面上 workflow 产品的局限问题出发，重新思考了任务的形式化表达，以及对于 workflow 产品的设计方法论，并得出了两条思考结果：</p>
<p><strong>（1）workflow 的系统设计可以形式化地表达为 DFA 的构造。</strong></p>
<p><strong>（2）workflow 的流程节点设计是给定约束条件下的 DFA 状态数量最小化问题。</strong></p>
<p>同时，借助自动机理论中的 DFA 状态数最小化算法，我们也给出了优化节点的策略参考。</p>
<p><strong>3.2 展望</strong></p>
<h4 id="heading-12"></h4>
<p>展望未来，我们认为 workflow 的以下方向仍然有提升和改进空间：</p>
<p><strong>（1）降低 workflow 学习和使用成本</strong></p>
<p>包括两方面：</p>
<ul>
<li>
<p>一方面，支持通过自然语言描述的方式先创建一个工作流的雏形（类比于当下 GPTs 产品自动生成 prompt），然后允许用户在其基础上二次编辑修改。</p>
</li>
<li>
<p>另一方面，支持通过自然语言描述的方式，创建自定义流程节点，其效果约等于多智能体的工作流编排。</p>
</li>
</ul>
<p><strong>（2）关于成环</strong></p>
<p>一个很有意思的现象是，目前市面上的产品，可能是出于担心死循环或者其他原因，在工作流的编排设计上不支持成环。</p>
<p>我们认为允许成环是有必要的，并且利大于弊的，对于一个 DFA 而言如果不允许其成环，那么它的能力一定是大打折扣的，而且有很多现实场景就是需要循环迭代的（e.g.让 LLM 生成正确的代码），做好相应的兜底措施就好。</p>
<p><strong>（3）人类在工作流中的参与和干预</strong></p>
<p>当前 LLM 的 planning 能力还不够强，所以一部分的 planning 工作仍然需要开发人员/业务专家来承担，允许人类在适当的时候参与进来，指出 LLM 的错误或者下一步应该采取的行动。</p>
<p>举个例子：当工作流执行到某一中间状态时，只要人类专家表达对上一状态 LLM 的生成结果不满意，可以携带专家的修改意见，返回到上一状态让 LLM 对之前的输出进行修正。</p>
<p><strong>（4）多模态 &amp; 动态交互</strong></p>
<p>我们上述讨论的一些场景，以及大模型实际在企业内落地的一些复杂任务，都会要求比较复杂的交互，比如报告生成任务，可能涉及到版本的回退、某一特定章节的修改等等场景。</p>
<p>显然，目前对话的交互形式已经无法承载复杂的工作任务，我们需要继续探索与 AI 的最佳交互方式。</p>
<p><strong>4 致谢</strong></p>
<h4 id="heading-13"></h4>
<p>本文灵感来源于 2017 Fall 台湾清华大学资讯工程学系何宗易教授《Formal Language》课程，这并不是门常见的课，在大陆往往会放在编译原理课程的前半部分，介绍形式语言与自动机相关内容。事实上我当时并不知道这门课是干什么的，听起来像是学正则表达式的水课就稀里糊涂去学了。</p>
<p>老实说涉及的理论有点枯燥，感谢何教授的个人魅力，让我在若干年后思考 workflow 产品设计时，依然能想起那些在炎炎夏日里画状态机的日子。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/iaG2fMDnhiaW7vkZcqgp8QpLIS6Q0IMsPibRcafws4Y0VwyF8qAH6DtBZhZttZALVygy60CAoTxagGdPxxVnUezmA/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/iaG2fMDnhiaW7vkZcqgp8QpLIS6Q0IMsPibIq3SJvTsBLKmnGHv0oyInB3ticcZC6DGfe67HxtiapdcvKd5SKc22Azw/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/iaG2fMDnhiaW7vkZcqgp8QpLIS6Q0IMsPibf5hVJibVHvCU6UB7bQhUWYDK2tyZu9J59GqhPpfTMXXc5kbMEibTcFEg/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>昆明湖畔，蝉声如织，时而高亢，时而低沉，将夏日的繁华与落寞交织在一起。壬戌亭下，绿荫婆娑，月影摇曳，仿佛在低语着青春的故事。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/vI9nYe94fsGxu3P5YibTO899okS0X9WaLmQCtia4U8Eu1xWCz9t8Qtq9PH6T1bTcxibiaCIkGzAxpeRkRFYqibVmwSw/640?wx_fmt=other&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1&amp;tp=webp" alt=""></p>
<p>更多AI工具，参考<a href="https://aibard123.com/">Github-AiBard123</a>，<a href="https://aibard123.com/">国内AiBard123</a></p>



          </div>

可关注我们的公众号：每天AI新工具

<p><img src="/images/aitools/2024/03/qrcode_for_gh_dde1b429630d_258.jpg" alt=""></p>

        </article>

      </div>
    </div>
  </div>
</section>
        </div>
    </div>
    </main>




<script type='text/javascript' src='/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
 

var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
 
</script>
<script type='text/javascript' src='/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>

<script type='text/javascript' src='/assets/js/app-anim.js' id='appanim-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background", "linear-gradient(#4f4040, #1b1d1f)");
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>


<script>
    var newsContainer = document.getElementById('news-container');
    var newsItems = document.getElementsByClassName('news-item');
    var currentItem = 0;

    setInterval(function() {
        
        newsItems[currentItem].classList.remove('show');
        newsItems[currentItem].style.transform = 'translateY(-20px)';
        
        currentItem = (currentItem + 1) % newsItems.length;
        newsItems[currentItem].style.transform = 'translateY(' + (newsContainer.offsetHeight - 20) + 'px)';
        setTimeout(function() {
            newsItems[currentItem].classList.add('show');
        }, 500);
    }, 8000);
</script>

</body>
</html>


