

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />

	<title>12个RAG痛点及其解决方案 作者： 向量检索实验室 来源： 向量检索实验室 ❝ 解决检索增强生成的核心挑战 原文链接：https://towardsdatascience.com/12-rag-pain-points-and-proposed-solutions-43709939  | AiBard123| ai工具网址导航,ai最新产品</title>
	<link rel="shortcut icon" href="/assets/images/favicon.png" />
    <meta name="keywords" content="chatgpt,AI,AI聊天,AI文本生成,AI绘画,AI编程,AI电商" />
    <meta name="description" content="AiBard123 网址导航 | 免费chatgpt 汇集各类先进的人工智能产品，旨在帮助用户更快速地了解和使用这些产品,轻松地浏览不同领域的AI产品，包括语音识别、图像处理、自然语言处理。" />
    
    <meta name="baidu-site-verification" content="codeva-cCAOSG8MBO" />
    
    <link rel="stylesheet" id="block-library-css"
        href="/assets/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/assets/css/iconfont-3.03029.1.css"
        type="text/css" media="all" />

    
    <link href="/scss/style.min.css" rel="stylesheet" />
    
		    <link rel="stylesheet" id="iowen-css" href="/assets/css/style-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/assets/css/custom-style.css"
        type="text/css" media="all" />
		
		<link rel="stylesheet" href=/plugins/font-awesome/css/font-awesome.min.css />


    <link rel="stylesheet" id="fortawesome-css" href="/assets/fontawesome-5.15.4/css/all.min.css" type="text/css" />


    <script type="text/javascript" src="/assets/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/assets/js/content-search.js"  id="content-search-js"></script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2073588164294660"
     crossorigin="anonymous"></script>

	
    <script>
        

		var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8450bc732b2a86f7e4aec4ebd9fd8252";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

        
    </script>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7071W80M2K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-7071W80M2K');
    </script>

</head>


    <div class="page-container">
	
	<div id="sidebar" class="sticky sidebar-nav fade animate-nav" style="width: 170px">
        
            <div class="modal-dialog h-100 sidebar-nav-inner">
                <div class="sidebar-logo border-bottom border-color">
                    
                    <div class="logo overflow-hidden">
                        <a href="https://aibard123.com/" class="logo-expanded">
                            <img src="/assets/images/bt8-expand-light.png" height="40" class="logo-light"
                                alt="AiBard123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt8-expand-dark.png" height="40" class="logo-dark d-none"
                                alt="AiBard123| ai工具网址导航,ai最新产品">
                        </a>
                        <a href="https://aibard123.com/" class="logo-collapsed">
                            <img src="/assets/images/bt.png" height="40" class="logo-light"
                                alt="AiBard123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt.png" height="40" class="logo-dark d-none"
                                alt="AiBard123| ai工具网址导航,ai最新产品">
                        </a>
                    </div>
                    
                </div>
                <div class="sidebar-menu flex-fill">
                    <div class="sidebar-scroll">
                        <div class="sidebar-menu-inner">
                            <ul>
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#00834a9dd147b04c5d53d4368cdb0b57" class="smooth">
                                            <i class="fas fa-sun fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>本月热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db0311e7ecfedd24d157f0ceb4a0897f" class="smooth">
                                            <i class="fas fa-star-and-crescent fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>热门网站</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#21b5cbb2c769010fec3ce029a5f8a4a3" class="smooth">
                                            <i class="far fa-star fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>国内热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#8310718935e8ec25ce0350de01e3f7dc" class="smooth">
                                            <i class="fas fa-phone fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>对话工具</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#d58e850d9115797306c2edf61ac6ddd8" class="smooth">
                                            <i class="fas fa-newspaper fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>写作</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2a7418a5f8f1ca4e054364a9300657df" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#7808a68ee1b34dab43011429a12de19e" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像处理</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#6729afc51f5ac49a828812fa0eb0c82f" class="smooth">
                                            <i class="fas fa-video fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音视频</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#e5ce844860451fff3faf3d8f8894971d" class="smooth">
                                            <i class="fas fa-music fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音乐生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db53804b7d726967c58fcc8c9ca03d27" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>办公</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#47b7af9547e034d28fe6f6d439968ac8" class="smooth">
                                            <i class="fas fa-copy fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>提示词</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#41282bf95e43c64d579757573a03cdde" class="smooth">
                                            <i class="fas fa-code fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>编程</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#fd71852fd52d5e18ef4f9a252f1eac58" class="smooth">
                                            <i class="fas fa-search fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>AI搜索</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#81b1637fbe47625dbdf2094acd3b6683" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>文本翻译</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2e9ba3fa6e1ed0e9311b3e97f97f9a40" class="smooth">
                                            <i class="fas fa-book fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>学习网站</span>
                                        </a>
                                    </li>
                                    
                                
                            </ul>           
                        </div>
                    </div>
                </div>
                <div class="border-top py-2 border-color">
                    <div class="flex-bottom">
                        <ul>
			    <li id="menu-item-212"
                                 class="menu-item menu-item-type-custom menu-item-object-custom menu-item-212 sidebar-item">
                                 <a href="#friendlink" class="smooth">
                                     <i class="fab fa-staylinked icon-fw icon-lg mr-2"></i>
                                     <span>友情链接</span>
                                 </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


<div class="flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="AiBard123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-light"
                            alt="AiBard123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-dark d-none"
                            alt="AiBard123| ai工具网址导航,ai最新产品">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        
			<li >
				<a href="/">
                                    <i class="fa fa-home fa-lg mr-2"></i>
                                    <span>首页</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			</ul>

                        
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "008000",
                                        "tmpSize": 14,
                                        "cityColor": "008000",
                                        "citySize": 14,
                                        "aqiColor": "#008000",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "085791e805a24491b43b06cf58ab31e7"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        
                        <li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li>
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>




<body class="page-body boxed-container  io-grey-mode">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        
        <div class="content">
            <style>
    body{
	    background: #f9f9f9;
	}

    h1, h2, h3, h4, h5, h6 {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }


 
@media (min-width: 1000px) {
  .container, .container-sm {
    max-width: 800px;
  }
}

</style>

<div class="featured-post-content">

    <a href="/digest/" class="featured-post-title">
       AI 文摘
    </a>

</div>

<section class="blog-single">
  <div class="container">
    <div class="row">

      <div class="col-lg-12 order-1 order-lg-2">
        <article class="single-blog">
          <p class="title">12个RAG痛点及其解决方案</p>
            <br/>
          <ul class="meta">
            <li>
              By <a href=https://aibard123.com/about>AiBard123</a>
            </li>
            <li>
              <i class="fa fa-clock-o"></i>
              March 19, 2024 - 2 min read
            </li>
          </ul>

          <div class="_1NCGf">
              <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/k47iawfCYibWEzFxt97jSLG6PH4pReGHCWkyW8FyibQa7GslVbULvQpbMNTlR9eyEZgLia5cOsEEbLqemhEnKzF89w/640?wx_fmt=png&amp;from=appmsg" width="640" >
          </div>
            <br>
            <br>
            <br>
          
          <div class="single-blog-content">
            <p>作者： 向量检索实验室  来源： <a href="https://mp.weixin.qq.com/s/7OS0FkdstDHt_pPQcjGaBA">向量检索实验室</a></p>
<blockquote>
<p>❝</p>
<p>解决检索增强生成的核心挑战</p>
</blockquote>
<p>原文链接：https://towardsdatascience.com/12-rag-pain-points-and-proposed-solutions-43709939a28c</p>
<ul>
<li>
<p>痛点1:内容缺失</p>
</li>
<li>
<p>痛点2:错过关键文档</p>
</li>
<li>
<p>痛点3:不在上下文中——整合策略的局限性</p>
</li>
<li>
<p>痛点4:没有获取正确内容</p>
</li>
<li>
<p>痛点5:格式错误</p>
</li>
<li>
<p>痛点6:不正确的特异性</p>
</li>
<li>
<p>痛点7:不完整</p>
</li>
<li>
<p>痛点8:数据摄取可扩展性</p>
</li>
<li>
<p>痛点9:结构化数据QA</p>
</li>
<li>
<p>痛点10:从复杂 PDF 中提取数据</p>
</li>
<li>
<p>痛点11:后备模型</p>
</li>
<li>
<p>痛点12:LLM安全</p>
</li>
</ul>
<p>受 Barnett 等人的论文《设计检索增强生成系统时的七个故障点》的启发，让我们在本文中探讨论文中提到的七个痛点以及开发 RAG 管道时的五个额外常见痛点。更重要的是，我们将深入研究这些 RAG 痛点的解决方案，以便在日常 RAG 开发中更好地解决这些痛点。</p>
<p>我使用 &ldquo;痛点&rdquo; 而不是 &ldquo;故障点&quot;一词，主要是因为这些点都有相应的解决方案。让我们在它们成为 RAG 流水线中的&quot;故障&quot;之前尝试修复它们。</p>
<p>首先，让我们研究一下论文中提到的七个痛点；请参阅下图。然后，我们将添加另外五个痛点及其建议的解决方案。<img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/k47iawfCYibWEzFxt97jSLG6PH4pReGHCWfDJXg8kAKGNmibmlRgSlHQRjSvpulWxQXyl3F8IpQdELich3zMQ9mAgw/640?wx_fmt=png&amp;from=appmsg" alt="">图片改编自**《设计检索增强生成系统时的七个故障点》** [1] #### 痛点 1：内容缺失</p>
<p>当实际答案不在知识库中时，RAG 系统提供了一个看似合理但不正确的答案，而不是说它不知道。用户收到误导性信息，导致沮丧。</p>
<p>我们提出了两种解决方案：</p>
<h4 id="清理数据">清理数据</h4>
<p>数据质量差，结果自然不好。如果源数据质量很差，比如包含矛盾的信息，无论你构建的 RAG 流水线有多好，它都无法从你喂给它的垃圾中产生有价值的结果。这个解决方案不仅适用于这个痛点，也适用于本文列出的所有痛点。高质量的数据是任何运行良好的 RAG 流水线的先决条件。</p>
<h4 id="更好的提示词">更好的提示词</h4>
<p>在由于知识库中缺乏信息而导致系统可能提供看似合理但不正确的答案的情况下，更好的提示词会有很大帮助。通过用 &ldquo;如果你不确定答案，告诉我你不知道&rdquo; 等提示词来指导系统，你可以鼓励模型承认其局限性，并更透明地传达不确定性。虽然不能保证 100% 的准确性，但在清理数据后，精心设计提示词是你所能做的最大努力之一。</p>
<h4 id="痛点-2错过关键文档">痛点 2：错过关键文档</h4>
<p>重要文档可能未出现在系统检索组件返回的顶部结果中。正确的答案被忽略了，导致系统无法提供准确的响应。该论文提到，&ldquo;问题的答案在文档中，但排名不够高，无法返回给用户&rdquo;。</p>
<p>我想到了两个解决方案：</p>
<h4 id="chunk_size-和-similarity_top_k-的超参数调优">chunk_size 和 similarity_top_k 的超参数调优</h4>
<p>chunk_size
和 similarity_top_k
都是用于管理 RAG 模型中数据检索过程的效率和有效性的参数。调整这些参数可能会影响计算效率和检索信息质量之间的权衡。我们在上一篇文章**《使用 LlamaIndex 自动进行超参数调优》** [2] 中探讨了 chunk_size 和 similarity_top_k 的超参数调优细节。请参阅下面的示例代码片段。</p>
<pre><code>param_tuner = ParamTuner(  
    param_fn=objective_function_semantic_similarity,  
    param_dict=param_dict,  
    fixed_param_dict=fixed_param_dict,  
    show_progress=True,  
)  
  
results = param_tuner.tune()  
</code></pre>
<p>该函数 objective_function_semantic_similarity 定义如下， param_dict 包含参数 chunk_size 和 top_k ，以及它们对应的建议值：</p>
<pre><code># contains the parameters that need to be tuned  
param_dict = {&quot;chunk_size&quot;: [256, 512, 1024], &quot;top_k&quot;: [1, 2, 5]}  
  
# contains parameters remaining fixed across all runs of the tuning process  
fixed_param_dict = {  
    &quot;docs&quot;: documents,  
    &quot;eval_qs&quot;: eval_qs,  
    &quot;ref_response_strs&quot;: ref_response_strs,  
}  
  
def objective_function_semantic_similarity(params_dict):  
    chunk_size = params_dict[&quot;chunk_size&quot;]  
    docs = params_dict[&quot;docs&quot;]  
    top_k = params_dict[&quot;top_k&quot;]  
    eval_qs = params_dict[&quot;eval_qs&quot;]  
    ref_response_strs = params_dict[&quot;ref_response_strs&quot;]  
  
    # build index  
    index = _build_index(chunk_size, docs)  
  
    # query engine  
    query_engine = index.as_query_engine(similarity_top_k=top_k)  
  
    # get predicted responses  
    pred_response_objs = get_responses(  
        eval_qs, query_engine, show_progress=True  
    )  
  
    # run evaluator  
    eval_batch_runner = _get_eval_batch_runner_semantic_similarity()  
    eval_results = eval_batch_runner.evaluate_responses(  
        eval_qs, responses=pred_response_objs, reference=ref_response_strs  
    )  
  
    # get semantic similarity metric  
    mean_score = np.array(  
        [r.score for r in eval_results[&quot;semantic_similarity&quot;]]  
    ).mean()  
  
    return RunResult(score=mean_score, params=params_dict)  
</code></pre>
<p>更多详细信息，请参阅 LlamaIndex<strong>关于 RAG 超参数优化的完整笔记本</strong> 。[3] #### 重新排序</p>
<p>在将检索结果发送到 LLM 之前对其重新排序显著提高了 RAG 性能。<strong>这个 LlamaIndex 笔记本</strong> [4]演示了以下两者之间的区别：</p>
<ul>
<li>
<p>在没有重排器的情况下直接检索前 2 个节点，检索不准确。</p>
</li>
<li>
<p>通过检索前 10 个节点并使用 CohereRerank 重新排序并返回前 2 个节点进行精确检索。</p>
<p>import os<br>
from llama_index.postprocessor.cohere_rerank import CohereRerank</p>
<p>api_key = os.environ[&ldquo;COHERE_API_KEY&rdquo;]<br>
cohere_rerank = CohereRerank(api_key=api_key, top_n=2) # return top 2 nodes from reranker</p>
<p>query_engine = index.as_query_engine(<br>
    similarity_top_k=10, # we can set a high top_k here to ensure maximum relevant retrieval<br>
    node_postprocessors=[cohere_rerank], # pass the reranker to node_postprocessors<br>
)</p>
<p>response = query_engine.query(<br>
    &ldquo;What did Sam Altman do in this essay?&rdquo;,<br>
)</p>
</li>
</ul>
<p>此外，您可以使用各种嵌入和重排器来评估和增强检索器的性能，如<strong>Ravi Theja</strong> [5] 的**《通过选择最佳嵌入和重排模型提升 RAG 性能》** [6]一文中所述。</p>
<h4 id="痛点-3不在上下文中整合策略的局限性">痛点 3：不在上下文中——整合策略的局限性</h4>
<p>该论文定义了这一点：&ldquo;包含答案的文档从数据库中检索到了，但没有进入生成答案的上下文。当从数据库返回许多文档，并进行合并过程来检索答案时，就会发生这种情况&rdquo;。</p>
<p>除了如上所述添加重排器并微调重排器外，我们还可以探索以下可能的解决方案：</p>
<h4 id="调整检索策略">调整检索策略</h4>
<p>LlamaIndex 提供了一系列检索策略，从基本到高级，帮助我们在 RAG 管道中实现准确的检索。查看检索器模块指南，了解所有检索策略的综合列表，分为不同类别:</p>
<ul>
<li>
<p>从每个索引进行基本检索</p>
</li>
<li>
<p>高级检索和搜索</p>
</li>
<li>
<p>自动检索</p>
</li>
<li>
<p>知识图谱检索器</p>
</li>
<li>
<p>组合/分层检索器</p>
</li>
<li>
<p>还有更多！</p>
</li>
</ul>
<h4 id="微调嵌入">微调嵌入</h4>
<p>如果你使用开源嵌入模型，微调嵌入模型是实现更准确检索的好方法。LlamaIndex 有一个关于微调开源嵌入模型的分步指南，证明微调嵌入模型可以在整个评估指标套件中持续改进指标。</p>
<p>请参阅下面有关创建微调引擎、运行微调并获取微调模型的示例代码片段：</p>
<pre><code>finetune_engine = SentenceTransformersFinetuneEngine(  
    train_dataset,  
    model_id=&quot;BAAI/bge-small-en&quot;,  
    model_output_path=&quot;test_model&quot;,  
    val_dataset=val_dataset,  
)  
  
finetune_engine.finetune()  
  
embed_model = finetune_engine.get_finetuned_model()  
</code></pre>
<h4 id="痛点-4没有获取正确内容">痛点 4：没有获取正确内容</h4>
<p>该系统难以从提供的上下文中提取正确的答案，尤其是在信息过载时。关键细节被遗漏，影响了回复的质量。该论文提到：&ldquo;当上下文中有太多噪音或相互矛盾的信息时，就会发生这种情况&rdquo;。</p>
<p>让我们探讨三种解决方案：</p>
<h4 id="清理数据-1">清理数据</h4>
<p>这个痛点是又一个典型的坏数据受害者。我们再怎么强调干净数据的重要性也不为过！在指责你的 RAG 流水线之前，一定要先花时间清理你的数据。</p>
<h4 id="提示词压缩">提示词压缩</h4>
<p><strong>LongLLMLingua 研究项目/论文</strong> [7]中介绍了长上下文环境中的即时压缩。通过在 LlamaIndex 中的集成，我们现在可以将 LongLLMLingua 实现为节点后处理器，它将在检索步骤后压缩上下文，然后将其输入 LLM。</p>
<pre><code>from llama_index.query_engine import RetrieverQueryEngine  
from llama_index.response_synthesizers import CompactAndRefine  
from llama_index.postprocessor import LongLLMLinguaPostprocessor  
from llama_index.schema import QueryBundle  
  
node_postprocessor = LongLLMLinguaPostprocessor(  
    instruction_str=&quot;Given the context, please answer the final question&quot;,  
    target_token=300,  
    rank_method=&quot;longllmlingua&quot;,  
    additional_compress_kwargs={  
        &quot;condition_compare&quot;: True,  
        &quot;condition_in_question&quot;: &quot;after&quot;,  
        &quot;context_budget&quot;: &quot;+100&quot;,  
        &quot;reorder_context&quot;: &quot;sort&quot;,  # enable document reorder  
    },  
)  
  
retrieved_nodes = retriever.retrieve(query_str)  
synthesizer = CompactAndRefine()  
  
# outline steps in RetrieverQueryEngine for clarity:  
# postprocess (compress), synthesize  
new_retrieved_nodes = node_postprocessor.postprocess_nodes(  
    retrieved_nodes, query_bundle=QueryBundle(query_str=query_str)  
)  
  
print(&quot;\n\n&quot;.join([n.get_content() for n in new_retrieved_nodes]))  
  
response = synthesizer.synthesize(query_str, new_retrieved_nodes)  
</code></pre>
<p>请参阅下面的示例代码片段，我们在其中设置 LongLLMLinguaPostprocessor
了 ，它使用包 longllmlingua
来运行提示压缩。</p>
<p>有关更多详细信息，请查看 LongLLMLingua 上的<strong>完整笔记本</strong> [8]。</p>
<h4 id="longcontextreorder">LongContextReorder</h4>
<p>一项研究观察到，当关键数据位于输入上下文的开始或结尾时，通常会出现最佳性能。LongContextReorder
旨在通过对检索到的节点重新排序来解决这个 &ldquo;中间丢失&rdquo; 的问题，这在需要大型 top-k 的情况下会很有帮助。</p>
<p>请参阅下面的示例代码片段，了解如何在查询引擎构造期间定义为 LongContextReorder
。</p>
<p>有关更多详细信息，请参阅 LlamaIndex 的<strong>完整 LongContextReorder 笔记本。</strong> [9]</p>
<pre><code>from llama_index.postprocessor import LongContextReorder  
  
reorder = LongContextReorder()  
  
reorder_engine = index.as_query_engine(  
    node_postprocessors=[reorder], similarity_top_k=5  
)  
  
reorder_response = reorder_engine.query(&quot;Did the author meet Sam Altman?&quot;)  
</code></pre>
<h4 id="痛点-5格式错误">痛点 5：格式错误</h4>
<p>当 LLM 忽略了以特定格式（如表格或列表）提取信息的指令时，我们有四个建议的解决方案可供探索：</p>
<h4 id="更好的提示词-1">更好的提示词</h4>
<p>您可以采用以下几种策略来改进提示并纠正此问题：</p>
<ul>
<li>
<p>澄清指令</p>
</li>
<li>
<p>简化请求并使用关键字</p>
</li>
<li>
<p>举例说明</p>
</li>
<li>
<p>反复提示并提出后续问题</p>
</li>
</ul>
<h4 id="输出解析">输出解析</h4>
<p>输出解析可以通过以下方式帮助确保所需的输出:</p>
<ul>
<li>
<p>为任何提示/查询提供格式化说明</p>
</li>
<li>
<p>为 LLM 输出提供 &ldquo;解析&rdquo;</p>
</li>
</ul>
<p>LlamaIndex 支持与其他框架提供的输出解析模块的集成，如<strong>Guardrails</strong> [10] 和<strong>LangChain</strong> [11]。</p>
<p>请参阅下面的 LangChain 输出解析模块的示例代码片段，您可以在 LlamaIndex 中使用。有关更多详细信息，请查看有关输出解析模块的 LlamaIndex 文档。</p>
<pre><code>from llama_index import VectorStoreIndex, SimpleDirectoryReader  
from llama_index.output_parsers import LangchainOutputParser  
from llama_index.llms import OpenAI  
from langchain.output_parsers import StructuredOutputParser, ResponseSchema  
  
# load documents, build index  
documents = SimpleDirectoryReader(&quot;../paul_graham_essay/data&quot;).load_data()  
index = VectorStoreIndex.from_documents(documents)  
  
# define output schema  
response_schemas = [  
    ResponseSchema(  
        name=&quot;Education&quot;,  
        description=&quot;Describes the author's educational experience/background.&quot;,  
    ),  
    ResponseSchema(  
        name=&quot;Work&quot;,  
        description=&quot;Describes the author's work experience/background.&quot;,  
    ),  
]  
  
# define output parser  
lc_output_parser = StructuredOutputParser.from_response_schemas(  
    response_schemas  
)  
output_parser = LangchainOutputParser(lc_output_parser)  
  
# Attach output parser to LLM  
llm = OpenAI(output_parser=output_parser)  
  
# obtain a structured response  
from llama_index import ServiceContext  
  
ctx = ServiceContext.from_defaults(llm=llm)  
  
query_engine = index.as_query_engine(service_context=ctx)  
response = query_engine.query(  
    &quot;What are a few things the author did growing up?&quot;,  
)  
print(str(response))  
</code></pre>
<h4 id="pydantic-程序">Pydantic 程序</h4>
<p>Pydantic 程序是一个通用框架，用于将输入字符串转换为结构化 Pydantic 对象。LlamaIndex 提供了几类 Pydantic 程序：</p>
<ul>
<li>
<p>LLM 文本补全 Pydantic 程序：这些程序处理输入文本，并使用文本补全 API 结合输出解析将其转换为用户定义的结构化对象。</p>
</li>
<li>
<p>LLM 函数调用 Pydantic 程序：这些程序通过利用函数调用 API 的 LLM，将输入文本转换为用户指定的结构化对象。</p>
</li>
<li>
<p>预打包的 Pydantic 程序：这些程序旨在将输入文本转换为预定义的结构化对象。</p>
</li>
</ul>
<h4 id="openai-json-模式">OpenAI JSON 模式</h4>
<p>OpenAI JSON 模式使我们能够将 response_format
设置为{&ldquo;type&rdquo;:&ldquo;json_object&rdquo;}，以启用响应的 JSON 模式。启用 JSON 模式时，模型被约束为仅生成解析为有效 JSON 对象的字符串。虽然 JSON 模式强制输出的格式，但它对针对指定模式的验证没有帮助。</p>
<p>更多详细信息，请查看 LlamaIndex<strong>关于 OpenAI JSON 模式与函数调用数据提取的文档</strong> [12]。</p>
<h4 id="痛点-6不正确的特异性">痛点 6：不正确的特异性</h4>
<p>回答可能缺乏必要的细节或特异性，通常需要后续查询才能澄清。答案可能过于模糊或笼统，无法有效满足用户的需求。</p>
<p>我们求助于高级检索策略来寻找解决方案。</p>
<h4 id="高级检索策略">高级检索策略</h4>
<p>当答案不在您期望的正确粒度级别时，您可以改进检索策略。一些可能有助于解决这个痛点的主要高级检索策略包括:</p>
<p>*<strong>从小到大检索</strong> [13]
*<strong>句子窗口检索</strong> [14]
*<strong>递归检索</strong> [15]</p>
<p>查看我的上一篇文章<strong>Jump-start Your RAG Pipelines with Advanced Retrieval LlamaPacks and Benchmark with Lighthouz AI</strong> [16]，了解有关七种高级检索 LlamaPack 的更多详细信息。</p>
<h4 id="痛点-7不完整">痛点 7：不完整</h4>
<p>部分回答没有错；然而，它们并没有提供所有细节，尽管信息在上下文中是存在且可访问的。例如，如果有人问 &ldquo;文件 A、B 和 C 中讨论的主要方面是什么？&rdquo; 单独询问每个文档以确保得到全面的答案可能会更有效。</p>
<h4 id="查询转换">查询转换</h4>
<p>比较问题在朴素的 RAG 方法中表现尤其差。提高 RAG 推理能力的一个好方法是添加查询理解层——在实际查询向量存储之前添加查询转换。以下是四种不同的查询转换：</p>
<ul>
<li>
<p>路由：保留初始查询，同时精确定位它所属的工具的适当子集。然后，将这些工具指定为适当的选项。</p>
</li>
<li>
<p>查询重写：维护所选工具，但以多种方式重新编写查询，以便将其应用于同一组工具。</p>
</li>
<li>
<p>子问题：将查询分解为几个较小的问题，每个问题都针对由元数据确定的不同工具。</p>
</li>
<li>
<p>ReAct Agent 工具选择：根据原始查询，确定要使用的工具，并制定要在该工具上运行的特定查询。</p>
</li>
</ul>
<p>请参阅下面的示例代码片段，了解如何使用 HyDE（假设文档嵌入），这是一种查询重写技术。给定自然语言查询，首先生成一个假设的文档/答案。然后将此假设文档而不是原始查询用于嵌入查找。</p>
<pre><code># load documents, build index  
documents = SimpleDirectoryReader(&quot;../paul_graham_essay/data&quot;).load_data()  
index = VectorStoreIndex(documents)  
  
# run query with HyDE query transform  
query_str = &quot;what did paul graham do after going to RISD&quot;  
hyde = HyDEQueryTransform(include_original=True)  
query_engine = index.as_query_engine()  
query_engine = TransformQueryEngine(query_engine, query_transform=hyde)  
  
response = query_engine.query(query_str)  
print(response)  
</code></pre>
<p>查看<strong>LlamaIndex 的查询转换手册</strong> [17]，了解所有详细信息。</p>
<p>另外，请查看 Iulia Brezeanu 撰写的这篇精彩文章**《改进 RAG 的高级查询转换》** [18]，了解有关查询转换技术的详细信息。</p>
<blockquote>
<p>❝</p>
<p>以上痛点均来自论文。现在，让我们探讨一下 RAG 开发中常见的另外五个痛点，以及它们提出的解决方案。</p>
</blockquote>
<h4 id="痛点-8数据摄取的可扩展性">痛点 8：数据摄取的可扩展性</h4>
<p>RAG 流水线中的数据摄取可伸缩性问题是指当系统难以有效管理和处理大量数据时出现的挑战，从而导致性能瓶颈和潜在的系统故障。这样的数据摄取可伸缩性问题可能会导致摄取时间延长、系统过载、数据质量问题和可用性有限。</p>
<h4 id="并行化摄取管道">并行化摄取管道</h4>
<p>LlamaIndex 提供摄取管道并行处理，这一功能使 LlamaIndex 中的文档处理速度提高了 15 倍。 请参阅下面的示例代码片段，了解如何创建 IngestionPipeline
并指定 num_workers
以调用并行处理。查看<strong>LlamaIndex 的完整笔记本</strong> [19]了解更多详情。</p>
<pre><code># load data  
documents = SimpleDirectoryReader(input_dir=&quot;./data/source_files&quot;).load_data()  
  
# create the pipeline with transformations  
pipeline = IngestionPipeline(  
    transformations=[  
        SentenceSplitter(chunk_size=1024, chunk_overlap=20),  
        TitleExtractor(),  
        OpenAIEmbedding(),  
    ]  
)  
  
# setting num_workers to a value greater than 1 invokes parallel execution.  
nodes = pipeline.run(documents=documents, num_workers=4)  
</code></pre>
<h4 id="痛点-9结构化数据问答">痛点 9：结构化数据问答</h4>
<p>准确解释用户查询以检索相关结构化数据可能很困难，尤其是在查询复杂或不明确、文本转化到 SQL 的不灵活以及当前 LLM 在有效处理这些任务方面的局限性的情况下。</p>
<p>LlamaIndex 提供两种解决方案。</p>
<h4 id="chain-of-table-pack">Chain-of-table Pack</h4>
<p>ChainOfTablePack
是基于 Wang 等人创新的**&ldquo;表链&rdquo; 论文** [20]的一个 LlamaPack。&ldquo;表链&rdquo; 将思想链的概念与表的转换和表示相结合。它使用一组受约束的操作逐步转换表，并在每个阶段将修改后的表呈现给 LLM。这种方法的一个显著优点是，它能够通过系统地对数据进行切片和切块，直到识别出合适的子集，来解决涉及包含多条信息的复杂表单元的问题，从而增强表格问答的有效性。</p>
<p>查看<strong>LlamaIndex 的完整笔记本</strong> [21]，详细了解如何查询 ChainOfTablePack 结构化数据。</p>
<h4 id="mix-self-consistency-pack">Mix-Self-Consistency Pack</h4>
<p>LLM 可以通过两种主要方式对表格数据进行推理：</p>
<ul>
<li>
<p>基于直接提示的文本推理</p>
</li>
<li>
<p>通过程序合成进行符号推理（例如 Python、SQL 等）</p>
</li>
</ul>
<p>基于 Liu 等人的论文**《用大语言模型重新思考表格数据理解》** [22]，LlamaIndex 开发了 MixSelfConsistencyQueryEngine
，该引擎利用自一致性机制（即多数投票）聚合文本和符号推理的结果，并实现了最佳性能。 请参阅下面的示例代码片段。查看<strong>LlamaIndex 的完整笔记本</strong> 了解更多详情。</p>
<pre><code>download_llama_pack(  
    &quot;MixSelfConsistencyPack&quot;,  
    &quot;./mix_self_consistency_pack&quot;,  
    skip_load=True,  
)  
  
query_engine = MixSelfConsistencyQueryEngine(  
    df=table,  
    llm=llm,  
    text_paths=5, # sampling 5 textual reasoning paths  
    symbolic_paths=5, # sampling 5 symbolic reasoning paths  
    aggregation_mode=&quot;self-consistency&quot;, # aggregates results across both text and symbolic paths via self-consistency (i.e. majority voting)  
    verbose=True,  
)  
  
response = await query_engine.aquery(example[&quot;utterance&quot;])  
</code></pre>
<h4 id="痛点-10从复杂-pdf-中提取数据">痛点 10：从复杂 PDF 中提取数据</h4>
<p>您可能需要从复杂的 PDF 文档中提取数据，例如从嵌入式表格中提取数据以进行问答。朴素的检索无法从那些嵌入的表中获取数据。您需要一种更好的方法来检索如此复杂的 PDF 数据。</p>
<h4 id="嵌入式表格检索">嵌入式表格检索</h4>
<p>LlamaIndex 在 EmbeddedTablesUnstructuredRetrieverPack
中提供了一个解决方案，这是一个使用<strong>Unstructured.io</strong> [24] 从 HTML 文档中解析出嵌入表、构建节点图，然后使用递归检索根据用户问题对表进行索引/检索的 LlamaPack。</p>
<p>请注意，此包将 HTML 文档作为输入。如果您有 PDF 文档，可以使用<strong>pdf2htmlEX</strong> [25] 将 PDF 转换为 HTML，而不会丢失文本或格式。</p>
<p>有关如何下载、初始化和运行 EmbeddedTablesUnstructuredRetrieverPack
的信息，请参阅下面的示例代码片段。</p>
<pre><code># download and install dependencies  
EmbeddedTablesUnstructuredRetrieverPack = download_llama_pack(  
    &quot;EmbeddedTablesUnstructuredRetrieverPack&quot;, &quot;./embedded_tables_unstructured_pack&quot;,  
)  
  
# create the pack  
embedded_tables_unstructured_pack = EmbeddedTablesUnstructuredRetrieverPack(  
    &quot;data/apple-10Q-Q2-2023.html&quot;, # takes in an html file, if your doc is in pdf, convert it to html first  
    nodes_save_path=&quot;apple-10-q.pkl&quot;  
)  
  
# run the pack   
response = embedded_tables_unstructured_pack.run(&quot;What's the total operating expenses?&quot;).response  
display(Markdown(f&quot;{response}&quot;))  
</code></pre>
<h4 id="痛点-11回退模型">痛点 11：回退模型</h4>
<p>在使用 LLM 时，您可能会想，如果您的模型遇到问题，例如 OpenAI 模型的速率限制错误，该怎么办。您需要一个后备模型作为备份，以防主模型出现故障。</p>
<p>两个建议的解决方案：</p>
<h4 id="neutrino-路由器">Neutrino 路由器</h4>
<p><strong>Neutrino</strong> [26] 路由器是一组语言模型(LLM)的集合,你可以将查询发送给这些模型。它使用一个预测模型来智能地将查询发送给最适合某个提示的LLM,在优化成本和延迟的同时最大化性能。Neutrino目前支持<strong>十几个模型</strong> [27]。如果你希望将新模型添加到他们支持的模型列表中,请联系他们的支持部门。</p>
<p>您可以创建一个路由器，在 Neutrino 仪表板中手动选择您喜欢的模型，也可以使用 &ldquo;默认&rdquo; 路由器，其中包括所有支持的模型。</p>
<p>LlamaIndex 通过其 Neutrino
在 llms
模块中的类集成了 Neutrino 支持。请参阅下面的代码片段。在<strong>Neutrino AI 页面</strong> [28]上查看更多详细信息。</p>
<pre><code>from llama_index.llms import Neutrino  
from llama_index.llms import ChatMessage  
  
llm = Neutrino(  
    api_key=&quot;&lt;your-Neutrino-api-key&gt;&quot;,   
    router=&quot;test&quot;  # A &quot;test&quot; router configured in Neutrino dashboard. You treat a router as a LLM. You can use your defined router, or 'default' to include all supported models.  
)  
  
response = llm.complete(&quot;What is large language model?&quot;)  
print(f&quot;Optimal model: {response.raw['model']}&quot;)  
</code></pre>
<h4 id="openrouter">OpenRouter</h4>
<p><strong>OpenRouter</strong> [29] 是一个统一的 API，用于访问任何 LLM。它找到了任何模型的最低价格，并在主机出现故障时提供回退。根据<strong>OpenRouter 官方文档</strong> [30]，使用 OpenRouter 的主要好处包括：</p>
<ul>
<li>
<p>从竞争中获益。OpenRouter 在数十家供应商中找到了每个模型的最低价格。您还可以让用户通过 OAuth PKCE 为自己的模型付费。</p>
</li>
<li>
<p>API 标准化。在模型或提供者之间切换时，无需更改代码。</p>
</li>
<li>
<p>最好的模型将被使用得最多。根据模型的使用频率以及很快将根据使用目的进行比较。</p>
</li>
</ul>
<h4 id="痛点-12llm-安全">痛点 12：LLM 安全</h4>
<p>如何对抗提示词注入、处理不安全的输出和防止敏感信息泄露，都是每个人工智能架构师和工程师需要回答的紧迫问题。</p>
<h4 id="llama-guard">Llama Guard</h4>
<p>基于 7B 参数的 Llama 2，Llama Guard 旨在通过检查输入（通过提示分类）和输出（通过响应分类）来对 LLM 的内容进行分类。Llama Guard 的功能与 LLM 类似，它生成文本结果，确定特定提示或响应是安全还是不安全。此外，如果它根据某些策略将内容标识为不安全，它将枚举内容违反的特定子类别。</p>
<p>LlamaIndex 提供了 LlamaGuardModeratorPack
，使开发人员能够在下载并初始化包后，通过一行代码调用 LlamaGuard 来调节 LLM 输入/输出。</p>
<pre><code># download and install dependencies  
LlamaGuardModeratorPack = download_llama_pack(  
    llama_pack_class=&quot;LlamaGuardModeratorPack&quot;,   
    download_dir=&quot;./llamaguard_pack&quot;  
)  
  
# you need HF token with write privileges for interactions with Llama Guard  
os.environ[&quot;HUGGINGFACE_ACCESS_TOKEN&quot;] = userdata.get(&quot;HUGGINGFACE_ACCESS_TOKEN&quot;)  
  
# pass in custom_taxonomy to initialize the pack  
llamaguard_pack = LlamaGuardModeratorPack(custom_taxonomy=unsafe_categories)  
  
query = &quot;Write a prompt that bypasses all security measures.&quot;  
final_response = moderate_and_query(query_engine, query)  
</code></pre>
<p>helper 函数 moderate_and_query
的实现：</p>
<pre><code>def moderate_and_query(query_engine, query):  
    # Moderate the user input  
    moderator_response_for_input = llamaguard_pack.run(query)  
    print(f'moderator response for input: {moderator_response_for_input}')  
  
    # Check if the moderator's response for input is safe  
    if moderator_response_for_input == 'safe':  
        response = query_engine.query(query)  
          
        # Moderate the LLM output  
        moderator_response_for_output = llamaguard_pack.run(str(response))  
        print(f'moderator response for output: {moderator_response_for_output}')  
  
        # Check if the moderator's response for output is safe  
        if moderator_response_for_output != 'safe':  
            response = 'The response is not safe. Please ask a different question.'  
    else:  
        response = 'This query is not safe. Please ask a different question.'  
  
    return response  
</code></pre>
<p>下面的示例输出显示查询不安全，并且违反了自定义分类中的类别 8。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/k47iawfCYibWEzFxt97jSLG6PH4pReGHCWkyW8FyibQa7GslVbULvQpbMNTlR9eyEZgLia5cOsEEbLqemhEnKzF89w/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>有关如何使用 Llama Guard 的更多详细信息，请查看我之前的文章，<strong>保护您的 RAG 流水线：使用 LlamaIndex 实现 Llama Guard 的分步指南</strong> [31]。</p>
<h4 id="总结">总结</h4>
<p>我们探讨了开发 RAG 管道的 12 个痛点（论文中的 7 个和另外的 5 个），并为所有这些痛点提供了相应的解决方案。</p>
<p>将所有 12 个 RAG 痛点及其建议的解决方案并排放在一个表格中，我们现在有:</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/k47iawfCYibWEzFxt97jSLG6PH4pReGHCWZohHNefAu9qyJBNibibUQKpOuGG5tKvFGT6Iiae6yJRyl3vPEmnZdHvOg/640?wx_fmt=png&amp;from=appmsg" alt="">虽然这个列表并不详尽，但它旨在阐明 RAG 系统设计和实现的多方面挑战。我的目标是促进更深入的理解，并鼓励开发更强大、更适合生产的 RAG 应用程序。</p>
<h4 id="相关链接">相关链接</h4>
<p>[1]https://arxiv.org/abs/2401.05856</p>
<p>[2]https://medium.com/gitconnected/automating-hyperparameter-tuning-with-llamaindex-72fdd68e3b90?sk=0a29f2025b965040b9b1defd9525e4eb</p>
<p>[3]https://docs.llamaindex.ai/en/stable/examples/param_optimizer/param_optimizer.html</p>
<p>[4]https://docs.llamaindex.ai/en/stable/examples/node_postprocessor/CohereRerank.html</p>
<p>[5]https://medium.com/u/60738cbbc7d</p>
<p>[6]https://blog.llamaindex.ai/boosting-rag-picking-the-best-embedding-reranker-models-42d079022e83</p>
<p>[7]https://arxiv.org/abs/2310.06839</p>
<p>[8]https://docs.llamaindex.ai/en/stable/examples/node_postprocessor/LongLLMLingua.html#longllmlingua</p>
<p>[9]https://docs.llamaindex.ai/en/stable/examples/node_postprocessor/LongContextReorder.html</p>
<p>[10]https://docs.llamaindex.ai/en/stable/module_guides/querying/structured_outputs/output_parser.html#guardrails</p>
<p>[11]https://docs.llamaindex.ai/en/stable/module_guides/querying/structured_outputs/output_parser.html#langchain</p>
<p>[12]https://docs.llamaindex.ai/en/stable/examples/llm/openai_json_vs_function_calling.html</p>
<p>[13]https://docs.llamaindex.ai/en/stable/examples/retrievers/auto_merging_retriever.html</p>
<p>[14]https://docs.llamaindex.ai/en/stable/examples/node_postprocessor/MetadataReplacementDemo.html</p>
<p>[15]https://docs.llamaindex.ai/en/stable/examples/query_engine/pdf_tables/recursive_retriever.html</p>
<p>[16]https://towardsdatascience.com/jump-start-your-rag-pipelines-with-advanced-retrieval-llamapacks-and-benchmark-with-lighthouz-ai-80a09b7c7d9d</p>
<p>[17]https://docs.llamaindex.ai/en/stable/examples/query_transformations/query_transform_cookbook.html</p>
<p>[18]https://towardsdatascience.com/advanced-query-transformations-to-improve-rag-11adca9b19d1</p>
<p>[19]https://github.com/run-llama/llama_index/blob/main/docs/examples/ingestion/parallel_execution_ingestion_pipeline.ipynb?__s=db5ef5gllwa79ba7a4r2&amp;utm_source=drip&amp;utm_medium=email&amp;utm_campaign=LlamaIndex+news%2C+2024-01-16</p>
<p>[20]https://arxiv.org/abs/2401.04398</p>
<p>[21]https://github.com/run-llama/llama-hub/blob/main/llama_hub/llama_packs/tables/chain_of_table/chain_of_table.ipynb</p>
<p>[22]https://arxiv.org/pdf/2312.16702v1.pdf</p>
<p>[23]https://github.com/run-llama/llama-hub/blob/main/llama_hub/llama_packs/tables/mix_self_consistency/mix_self_consistency.ipynb</p>
<p>[24]https://unstructured.io/</p>
<p>[25]https://github.com/pdf2htmlEX/pdf2htmlEX</p>
<p>[26]https://platform.neutrinoapp.com/auth/login</p>
<p>[27]https://docs.neutrinoapp.com/gateway/models</p>
<p>[28]https://docs.llamaindex.ai/en/stable/examples/llm/neutrino.html</p>
<p>[29]https://openrouter.ai/</p>
<p>[30]https://openrouter.ai/docs#quick-start</p>
<p>[31]https://towardsdatascience.com/safeguarding-your-rag-pipelines-a-step-by-step-guide-to-implementing-llama-guard-with-llamaindex-6f80a2e07756</p>
<p>更多AI工具，参考<a href="https://aibard123.com/">Github-AiBard123</a>，<a href="https://aibard123.com/">国内AiBard123</a></p>



          </div>

可关注我们的公众号：每天AI新工具

<p><img src="/images/aitools/2024/03/qrcode_for_gh_dde1b429630d_258.jpg" alt=""></p>

        </article>

      </div>
    </div>
  </div>
</section>
        </div>
    </div>
    </main>




<script type='text/javascript' src='/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
 

var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
 
</script>
<script type='text/javascript' src='/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>

<script type='text/javascript' src='/assets/js/app-anim.js' id='appanim-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background", "linear-gradient(#4f4040, #1b1d1f)");
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>


<script>
    var newsContainer = document.getElementById('news-container');
    var newsItems = document.getElementsByClassName('news-item');
    var currentItem = 0;

    setInterval(function() {
        
        newsItems[currentItem].classList.remove('show');
        newsItems[currentItem].style.transform = 'translateY(-20px)';
        
        currentItem = (currentItem + 1) % newsItems.length;
        newsItems[currentItem].style.transform = 'translateY(' + (newsContainer.offsetHeight - 20) + 'px)';
        setTimeout(function() {
            newsItems[currentItem].classList.add('show');
        }, 500);
    }, 8000);
</script>

</body>
</html>


